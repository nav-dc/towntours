<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Simple Product Manager</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; }
        body { background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%); min-height: 100vh; color: #333; padding: 20px; }
        .container { max-width: 1200px; margin: 0 auto; display: flex; flex-direction: column; gap: 30px; }
        header { text-align: center; padding: 20px; background: white; border-radius: 12px; box-shadow: 0 5px 15px rgba(0,0,0,0.08); }
        h1 { font-size: 2.2rem; color: #2c3e50; margin-bottom: 10px; }
        .subtitle { font-size: 1rem; color: #7f8c8d; max-width: 600px; margin: 0 auto; }
        .content { display: flex; flex-direction: column; gap: 25px; }
        .form-section, .products-section { background: white; border-radius: 12px; box-shadow: 0 5px 20px rgba(0,0,0,0.08); padding: 25px; }
        .section-title { font-size: 1.5rem; color: #2c3e50; margin-bottom: 20px; padding-bottom: 12px; border-bottom: 2px solid #3498db; }
        .form-group { margin-bottom: 18px; }
        label { display: block; margin-bottom: 6px; font-weight: 600; color: #2c3e50; }
        input, textarea, select { width: 100%; padding: 12px; border: 1px solid #ddd; border-radius: 8px; font-size: 16px; transition: all 0.3s; }
        input:focus, textarea:focus, select:focus { outline: none; border-color: #3498db; box-shadow: 0 0 0 3px rgba(52,152,219,0.2); }
        textarea { min-height: 100px; resize: vertical; }
        .file-input-container { position: relative; }
        .file-input-container input[type="file"] { position: absolute; left:0; top:0; opacity:0; width:100%; height:100%; cursor:pointer; }
        .file-input-button { display: flex; align-items: center; justify-content: center; gap: 10px; background: #3498db; color: white; padding: 12px 20px; border-radius: 8px; font-weight: 600; cursor: pointer; transition: all 0.3s; }
        .file-input-button:hover { background: #2980b9; }
        .file-name { margin-top: 8px; font-size: 14px; color: #7f8c8d; }
        .price-container { display: flex; align-items: center; }
        .price-container::before { content: '$'; background: #f8f9fa; padding: 12px; border: 1px solid #ddd; border-right: none; border-radius: 8px 0 0 8px; font-weight: 600; }
        #price { border-radius: 0 8px 8px 0; }
        .btn { background: #3498db; color: white; border: none; padding: 14px 20px; border-radius: 8px; font-size: 16px; font-weight: 600; cursor: pointer; transition: all 0.3s; width: 100%; display: flex; justify-content: center; align-items: center; gap: 10px; }
        .btn:hover { background: #2980b9; transform: translateY(-2px); box-shadow: 0 5px 15px rgba(52,152,219,0.4); }
        .product-list { display: grid; grid-template-columns: repeat(auto-fill, minmax(280px, 1fr)); gap: 20px; margin-top: 20px; }
        .product-card { background: white; border-radius: 10px; overflow: hidden; box-shadow: 0 4px 12px rgba(0,0,0,0.08); transition: all 0.3s ease; }
        .product-card:hover { transform: translateY(-5px); box-shadow: 0 8px 20px rgba(0,0,0,0.12); }
        .product-image { height: 180px; overflow: hidden; display: flex; align-items: center; justify-content: center; background: #f8f9fa; }
        .product-image img { width: 100%; height: 100%; object-fit: cover; }
        .product-details { padding: 16px; }
        .product-info { display: flex; flex-direction: column; gap: 8px; margin-bottom: 12px; }
        .product-name { font-size: 1.2rem; font-weight: 700; color: #2c3e50; }
        .product-field { display: flex; align-items: center; gap: 8px; font-size: 0.95rem; color: #555; }
        .product-field i { color: #3498db; width: 20px; text-align: center; }
        .product-price { font-size: 1.1rem; color: #e74c3c; font-weight: 700; }
        .product-description { font-size: 0.9rem; color: #7f8c8d; margin-top: 10px; border-top: 1px solid #eee; padding-top: 10px; }
        .product-time { color: #95a5a6; font-size: 0.8rem; }
        .product-status { display: inline-block; padding: 4px 10px; border-radius: 20px; font-size: 0.8rem; font-weight: 600; margin-top: 8px; }
        .status-pending { background: #ffeaa7; color: #d35400; }
        .status-approved { background: #d1f7c4; color: #27ae60; }
        .card-actions { display: flex; justify-content: space-between; padding: 12px 16px; border-top: 1px solid #eee; }
        .action-btn { background: none; border: none; cursor: pointer; font-size: 16px; padding: 6px 12px; border-radius: 6px; transition: all 0.2s; }
        .edit-btn { color: #3498db; }
        .edit-btn:hover { background: rgba(52,152,219,0.1); }
        .delete-btn { color: #e74c3c; }
        .delete-btn:hover { background: rgba(231,76,60,0.1); }
        .empty-state { text-align: center; padding: 30px 0; color: #7f8c8d; grid-column: 1 / -1; }
        .empty-state i { font-size: 3rem; margin-bottom: 12px; color: #bdc3c7; }
        .filter-section { background: #f8f9fa; padding: 15px; border-radius: 8px; margin-bottom: 20px; display: flex; gap: 15px; align-items: center; flex-wrap: wrap; }
        .filter-label { font-weight: 600; color: #2c3e50; }
        .filter-select { flex: 1; min-width: 150px; }
        @media (min-width: 768px) { .content { flex-direction: row; } .form-section, .products-section { flex: 1; } h1 { font-size: 2.5rem; } .section-title { font-size: 1.6rem; } }
    </style>
</head>
<body>
<div class="container">
    <header>
        <h1>Simple Product Manager</h1>
        <p class="subtitle">Easily add and manage your products</p>
    </header>

    <div class="content">
        <section class="form-section">
            <h2 class="section-title">Add New Product</h2>
            <form id="product-form">
                <div class="form-group">
                    <label for="businessName">Business Name</label>
                    <input type="text" id="businessName" placeholder="Enter business name" required>
                </div>
                <div class="form-group">
                    <label for="phone">Phone Number</label>
                    <input type="tel" id="phone" placeholder="Enter phone number" required>
                </div>
                <div class="form-group">
                    <label for="name">Product Name</label>
                    <input type="text" id="name" placeholder="Enter product name" required>
                </div>
                <div class="form-group">
                    <label for="price">Price</label>
                    <div class="price-container">
                        <input type="number" id="price" placeholder="0.00" step="0.01" min="0" required>
                    </div>
                </div>
                <div class="form-group">
                    <label for="address">Address</label>
                    <input type="text" id="address" placeholder="Where is the product located?" required>
                </div>
                <div class="form-group">
                    <label for="description">Description</label>
                    <textarea id="description" placeholder="Describe the product features and condition..." required></textarea>
                </div>
                <div class="form-group">
                    <label for="image">Product Image</label>
                    <div class="file-input-container">
                        <div class="file-input-button">
                            <i class="fas fa-upload"></i> Choose File
                        </div>
                        <input type="file" id="image" accept="image/*">
                    </div>
                    <div class="file-name" id="file-name">No file chosen</div>
                </div>
                <button type="submit" class="btn">
                    <i class="fas fa-plus-circle"></i> Add Product
                </button>
            </form>
        </section>
    </div>
</div>

<script>
<script>
document.addEventListener('DOMContentLoaded', function() {
    const productForm = document.getElementById('product-form');
    const productList = document.getElementById('product-list');
    const fileInput = document.getElementById('image');
    const fileName = document.getElementById('file-name');
    const statusFilter = document.getElementById('status-filter');

    let products = [];
    let currentProductId = null;

    // Load products from localStorage
    const savedProducts = localStorage.getItem('products');
    if (savedProducts) {
        products = JSON.parse(savedProducts);
        refreshProductList();
    }

    // File input change event
    fileInput.addEventListener('change', function() {
        if (this.files.length > 0) {
            fileName.textContent = this.files[0].name;
        } else {
            fileName.textContent = 'No file chosen';
        }
    });

    // Status filter change
    statusFilter.addEventListener('change', function() {
        refreshProductList();
    });

    // Handle form submission
    productForm.addEventListener('submit', function(e) {
        e.preventDefault();

        const businessName = document.getElementById('businessName').value.trim();
        const phone = document.getElementById('phone').value.trim();
        const name = document.getElementById('name').value.trim();
        const price = parseFloat(document.getElementById('price').value);
        const address = document.getElementById('address').value.trim();
        const description = document.getElementById('description').value.trim();

        if (!businessName || !phone || !name || !price || !address || !description) {
            alert('Please fill in all fields.');
            return;
        }

        let imageUrl = "https://via.placeholder.com/300x180.png?text=Product+Image"; // Placeholder for image

        const productData = { businessName, phone, name, price, address, description, image: imageUrl };

        // Save locally first
        addProduct(productData);

        // Submit to Google Sheet via JSONP
        submitToSheetJSONP(productData);
    });

    function addProduct(productData) {
        const product = {
            id: currentProductId || Date.now(),
            ...productData,
            status: 'pending',
            createdAt: new Date().toISOString()
        };

        if (currentProductId) {
            const index = products.findIndex(p => p.id === currentProductId);
            if (index !== -1) products[index] = product;
            currentProductId = null;
        } else {
            products.push(product);
        }

        saveProducts();
        refreshProductList();
        productForm.reset();
        fileName.textContent = 'No file chosen';
    }

    function saveProducts() {
        localStorage.setItem('products', JSON.stringify(products));
    }

    function refreshProductList() {
        productList.innerHTML = '';
        let filtered = products;
        const filterValue = statusFilter.value;
        if (filterValue !== 'all') filtered = products.filter(p => p.status === filterValue);

        if (filtered.length === 0) {
            productList.innerHTML = `
                <div class="empty-state">
                    <i class="fas fa-box-open"></i>
                    <p>No products found</p>
                </div>
            `;
            return;
        }

        filtered.forEach(p => renderProduct(p));
    }

    function renderProduct(product) {
        const createdTime = new Date(product.createdAt).toLocaleString();
        const card = document.createElement('div');
        card.className = 'product-card';
        card.dataset.id = product.id;

        card.innerHTML = `
            <div class="product-image">
                <img src="${product.image}" alt="${product.name}">
            </div>
            <div class="product-details">
                <div class="product-info">
                    <h3 class="product-name">${product.name}</h3>
                    <div class="product-field"><i class="fas fa-store"></i>${product.businessName}</div>
                    <div class="product-field"><i class="fas fa-phone"></i>${product.phone}</div>
                    <div class="product-field"><i class="fas fa-map-marker-alt"></i>${product.address}</div>
                    <div class="product-price">$${product.price.toFixed(2)}</div>
                </div>
                <div class="product-description">${product.description}</div>
                <div class="product-time">Added: ${createdTime}</div>
                <div class="product-status status-${product.status}">${product.status}</div>
            </div>
        `;

        productList.appendChild(card);
    }

    // JSONP submission
    function submitToSheetJSONP(data) {
        const webAppUrl = "https://script.google.com/macros/s/AKfycbxFabVyvKSsG5azgJi1VtM7u_RJQIJpxZ2R3C4rMv7xegYanuuo54Gz4PnmhP0NMZJq/exec"; 
        let url = webAppUrl + "?callback=handleSheetResponse";
        url += "&businessName=" + encodeURIComponent(data.businessName);
        url += "&phone=" + encodeURIComponent(data.phone);
        url += "&name=" + encodeURIComponent(data.name);
        url += "&price=" + encodeURIComponent(data.price);
        url += "&address=" + encodeURIComponent(data.address);
        url += "&description=" + encodeURIComponent(data.description);
        url += "&image=" + encodeURIComponent(data.image || "");

        const script = document.createElement('script');
        script.src = url;
        document.body.appendChild(script);
    }

    // JSONP callback
    window.handleSheetResponse = function(response) {
        if (response.result === "success") {
            alert("Product submitted to Google Sheet successfully!");
        } else {
            alert("Error submitting to Google Sheet: " + response.message);
        }
    }
});
</script>

</script>
</body>
</html>



